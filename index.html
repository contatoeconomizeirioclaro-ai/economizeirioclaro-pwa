<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Economizei Rio Claro</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">

  <link rel="manifest" href="/manifest.json">
  <meta name="theme-color" content="#f4c430">

  <!-- Splash -->
  <link rel="stylesheet" href="/splash.css">

  <style>
    html, body {
      margin: 0;
      padding: 0;
      width: 100%;
      height: 100%;
      overflow: hidden;
      background: #ffffff;
    }

    iframe {
      border: none;
      width: 100%;
      height: 100%;
      display: none;
      visibility: hidden;
      opacity: 0;
      transition: opacity .3s ease;
    }

    body.splash-complete iframe {
      display: block;
      visibility: visible;
      opacity: 1;
    }

    body:not(.splash-complete) > iframe {
      display: none !important;
    }

    /* =====================================================
       MODAL NATIVO â€” PUSH NOTIFICATIONS
       ===================================================== */
    .push-overlay {
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,.55);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 99999;
    }

    .push-modal {
      background: #fff;
      width: 90%;
      max-width: 360px;
      border-radius: 18px;
      padding: 22px;
      text-align: center;
      box-shadow: 0 20px 40px rgba(0,0,0,.25);
      animation: fadeUp .35s ease;
    }

    .push-modal img {
      width: 64px;
      margin-bottom: 12px;
    }

    .push-modal h3 {
      margin: 0 0 8px;
      font-size: 18px;
    }

    .push-modal p {
      font-size: 14px;
      color: #555;
      margin-bottom: 18px;
    }

    .push-actions {
      display: flex;
      gap: 10px;
    }

    .push-actions button {
      flex: 1;
      padding: 12px;
      border-radius: 12px;
      border: none;
      font-weight: bold;
      cursor: pointer;
    }

    .push-allow {
      background: #f4c430;
      color: #000;
    }

    .push-deny {
      background: #eee;
      color: #555;
    }

    @keyframes fadeUp {
      from { opacity: 0; transform: translateY(20px); }
      to   { opacity: 1; transform: translateY(0); }
    }
  </style>
</head>

<body>

<!-- SPLASH -->
<div id="splash-screen">
  <div class="splash-container">
    <img id="splash-pin"
      src="https://raw.githubusercontent.com/contatoeconomizeirioclaro-ai/economizeirioclaro-pwa/main/assets/pin.png"
      width="200" height="200" alt="Economizei">

    <img id="splash-text"
      src="https://raw.githubusercontent.com/contatoeconomizeirioclaro-ai/economizeirioclaro-pwa/main/assets/logo-texto.png"
      width="250" height="90" alt="Economizei Rio Claro">
  </div>
</div>

<!-- BLOGGER -->
<iframe
  src="https://www.economizeirioclaro.com.br/?app=1"
  loading="eager"
  referrerpolicy="no-referrer-when-downgrade"
  allow="fullscreen">
</iframe>

<!-- =====================================================
     MODAL NATIVO (HTML)
     ===================================================== -->
<div class="push-overlay" id="pushOverlay">
  <div class="push-modal">
    <img src="https://raw.githubusercontent.com/contatoeconomizeirioclaro-ai/economizeirioclaro-pwa/main/assets/pin.png">
    <h3>Receber notificaÃ§Ãµes?</h3>
    <p>Fique por dentro das melhores ofertas de Rio Claro em tempo real.</p>
    <div class="push-actions">
      <button class="push-deny" id="pushNo">Agora nÃ£o</button>
      <button class="push-allow" id="pushYes">Ativar</button>
    </div>
  </div>
</div>

<script>
/* =====================================================
   MODAL NATIVO â€” CONTROLE
   ===================================================== */

document.addEventListener('DOMContentLoaded', () => {

  const isPWA =
    window.matchMedia('(display-mode: standalone)').matches ||
    window.navigator.standalone === true;

  if (!isPWA) return;

  if (Notification.permission !== 'default') return;
  if (localStorage.getItem('push-modal-dismissed')) return;

  setTimeout(() => {
    document.getElementById('pushOverlay').style.display = 'flex';
  }, 1500);

  document.getElementById('pushNo').onclick = () => {
    localStorage.setItem('push-modal-dismissed', 'true');
    document.getElementById('pushOverlay').remove();
  };

  document.getElementById('pushYes').onclick = async () => {
    const permission = await Notification.requestPermission();
    localStorage.setItem('push-modal-dismissed', 'true');
    document.getElementById('pushOverlay').remove();

    console.log('ðŸ”” PermissÃ£o:', permission);
  };

});
</script>

<!-- =====================================================
     SEU SCRIPT ORIGINAL (GOOGLE SHEETS)
     ===================================================== -->
<script>
/* (mantido exatamente como vocÃª enviou) */
</script>

<script src="/splash.js"></script>
</body>
</html>
